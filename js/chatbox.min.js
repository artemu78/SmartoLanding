!function(){var e=window,t=document;function i(e){if("function"!=typeof e||e.nodeName)return new i.fn.init(e);t.addEventListener("DOMContentLoaded",e)}function o(o){if(!o||0==this.length)return this;var a=[];if("object"==typeof o||"function"==typeof o)if(o==e||o==t||o.nodeName)a.push(o);else for(var r=0;r<o.length;r++)a.push(o[r]);if("string"==typeof o){var n=[t];this.length>0&&(n=this);for(r=0;r<n.length;r++)if(n[r]){if("iframe"==n[r].nodeName.toLowerCase())var s=(n[r].contentDocument||n[r].contentWindow.document).querySelectorAll(o);else s=n[r].querySelectorAll(o);for(var d=0;d<s.length;d++)a.push(s[d])}}n=i();var l=0;for(r=0;r<a.length;r++)a[r]&&(a[r].jswd||(a[r].jswd={}),n[r]=a[r],l++);return n.length=l,n}i.fn={init:o,find:o,css:function(o,a){var r="",n=(a=a||!1,t.documentElement),d=t.body;function l(e){var t=e.split(""),i=[],o=!1;"float"==e&&(e="cssFloat");for(var a=0;a<t.length;a++)1!=o?"-"==t[a]&&a>0?o=!0:i[a]=t[a]:(i[a]=t[a].toUpperCase(),o=!1);return i.join("")}if("string"==typeof o){if(!this[0])return"";o=l(o);var h=this[0];return h!=e&&h!=t&&(r=getComputedStyle(h)[o]),h==e&&("width"==o?r=e.innerWidth:"height"==o&&(r=e.innerHeight)),"scrollTop"==o&&(r=h==e||h==t?e.pageYOffset||0:h.scrollTop),"scrollLeft"==o&&(r=h==e||h==t?e.pageXOffset||0:h.scrollLeft),0==a&&"string"==typeof r&&r.match(/^\-?[0-9\\.]+[a-z]+$/i)&&(r=parseFloat(r)),r}if("object"==typeof o)for(var p=0;p<this.length;p++)if(this[p])for(var r in o)if(r.match(/\s*(scrolltop|scroll-top)\s*/gi))s=parseFloat(o[r])||0,this[p]==e||this[p]==t||this[p]==n||this[p]==d?e.scrollTo(i(e).css("scroll-left"),s):this[p].scrollTop=s;else if(r.match(/\s*(scrollleft|scroll-left)\s*/gi))s=parseFloat(o[r])||0,this[p]==e||this[p]==t||this[p]==n||this[p]==d?e.scrollTo(s,i(e).css("scroll-top")):this[p].scrollLeft=s;else{var c=l(r);this[p].style[c]=o[r]}return this},attr:function(e){if(!e)return this;if("string"==typeof e&&e.match("=")){var t=e.match(/[\w\-]+\s*\=\s*[\'\"][^\'\"]*[\'\"]\s*/gi);e={};for(var i=0;i<t.length;i++){var o=[t[i].slice(0,t[i].indexOf("=")),t[i].slice(t[i].indexOf("=")+1)];e[o[0].replace(/^\s*|\s*$/g,"")]=o[1].replace(/^[\'\"]{1}|[\'\"]{1}$/g,"")}}if("object"==typeof e){for(i=0;i<this.length;i++)if(this[i])for(var a in e)"class"!=a?this[i].setAttribute(a,e[a]):this[i].className=e[a];return this}if(!this[0])return"";t="";return t="class"!=e?this[0].getAttribute(e):this[0].className},addClass:function(e){e=e.split(" ");for(var t=0;t<this.length;t++)if(this[t]){for(var i=this[t],o=(o=i.className||"").split(" "),a=0,r=[],n=0;n<e.length;n++){for(var s=0;s<o.length;s++)if(a=0,e[n]==o[s]){a=1;break}0==a&&r.push(e[n])}if(r.length>0){var d=" ",l=i.className;l||(d=""),i.className=l+d+r.join(" ")}}return this},removeClass:function(e){e=e.split(" ");for(var t=0;t<this.length;t++)if(this[t]){for(var i=this[t],o=(o=i.className||"").split(" "),a=0;a<e.length;a++)for(var r=0;r<o.length;r++)e[a]==o[r]&&(o.splice(r,1),r--);i.className=o.join(" ")}return this},show:function(){for(var e=0;e<this.length;e++){if(this[e])if(this[e].style.display="","none"==getComputedStyle(this[e]).display.toLowerCase()){var t=document.createElement(this[e].nodeName.toLowerCase());t.style.cssText="width:0;height:0;",document.body.appendChild(t);var i=getComputedStyle(t).display;document.body.removeChild(t),this[e].style.display=i}}return this},hide:function(){for(var e=0;e<this.length;e++)this[e]&&(this[e].style.display="none");return this},html:function(e){if(null!=e){for(var i=0;i<this.length;i++)if(this[i]){this[i].innerHTML=e;for(var o=this[i].getElementsByTagName("script"),a=0;a<o.length;a++){for(var r=t.createElement("script"),n=o[a].attributes,s=n.length,d=0;d<s;d++)r.setAttribute(n[d].name,n[d].value);r.innerHTML=o[a].innerHTML,o[a].parentNode.replaceChild(r,o[a])}}return this}return this[0]?this[0].innerHTML:""},val:function(e){if(null==e){return this[0]?"textarea"!=this[0].nodeName.toLowerCase()&&"input"!=this[0].nodeName.toLowerCase()?i(this[0]).attr("value")?i(this[0]).attr("value"):this[0].innerHTML:this[0].value||"":""}for(var t=0;t<this.length;t++)this[t]&&("textarea"!=this[t].nodeName.toLowerCase()&&"input"!=this[0].nodeName.toLowerCase()&&this[0].hasAttribute("contenteditable")?this[t].innerHTML=e:this[t].value=e);return this},append:function(e){var i=function(e){var i=t.createDocumentFragment();if("string"==typeof e){var o=t.createElement("div");for(o.innerHTML=e;o.firstChild;)i.appendChild(o.firstChild)}if("object"==typeof e)if(e.nodeName)i.appendChild(e);else for(var a=0;a<e.length;a++)i.appendChild(e[a]);return i}(e);if("string"==typeof e){var o=t.createElement("div");o.appendChild(i.cloneNode(!0));for(var a=0;a<this.length;a++)if(this[a]){var r=i;a<this.length-1&&(r=i.cloneNode(!0));for(var n=[],s=o.children,d=0;d<s.length;d++)s[d]&&"script"==s[d].nodeName.toLowerCase()&&n.push(s[d]);this[a].appendChild(r);for(d=0;d<n.length;d++){for(var l=t.createElement("script"),h=n[d].attributes,p=h.length,c=0;c<p;c++)l.setAttribute(h[c].name,h[c].value);l.innerHTML=n[d].innerHTML,n[d].parentNode.replaceChild(l,n[d])}}}if("object"==typeof e)for(a=0;a<this.length;a++)if(this[a]){r=i;a<this.length-1&&(r=i.cloneNode(!0)),this[a].appendChild(r)}return this},each:function(e){for(var t=0;t<this.length;t++)e.apply(this[t],[t,this[t]]);return this}},i.fn.init.prototype=i.fn,i.create=function(e){return i(document.createElement(e))},i(function(){var t={s:0,r:0,d:0,o:"l"};e.innerHeight>=e.innerWidth?t.o="p":t.o="l",(t.o="l")&&(e.innerHeight<1024?t.s=1:t.s=0),(t.o="p")&&(e.innerWidth<=1024?t.s=1:t.s=0);var o=i("#smartobotobots_CHB").attr("token"),a=i("#smartobotobots_CHB").attr("header-text")||"Напишите нам, мы онлайн",r=i("#smartobotobots_CHB").attr("header-bg-color")||"#424867",n="url("+i("#smartobotobots_CHB").attr("header-bg-img")+")"||"linear-gradient(to right, #2f324a, #424867)",s=i("#smartobotobots_CHB").attr("content-bg-color")||"#ffffff",d="url("+i("#smartobotobots_CHB").attr("content-bg-img")+")"||"",l=i("#smartobotobots_CHB").attr("open-btn-id")||"",h="<style>html,body{padding:0;margin:0;width:100%;height:100%;overflow:hidden;}.CHB{padding:0;margin:0;font-family:Arial;}.CHB.active{}.CHB_wrapper{}.CHB_wrapper{width:100%;height:100%;}.CHB .header{height:50px;margin:0;padding:0;background-color:"+r+";background-image:"+n+";border-top-left-radius:5px;border-top-right-radius:5px;font-size:15px;color:#fff;}.CHB .header_wrapper{position:relative;}.CHB .header_wrapper > ul{display:table;margin:0;padding:0;width:100%;}.CHB .header_wrapper > ul > li{display:table-cell;height:50px;vertical-align:middle;}.CHB .header .default{cursor:pointer;}.CHB .header .default span{display:block;padding:16px 15px;}.CHB .header .loading{padding:16px 15px;cursor:pointer;}.CHB .header .error{padding:16px 15px;color:#ff0000;cursor:pointer;}.CHB .header .OP{display:none;padding:0 10px;}.CHB .header .OP ul{display:table;margin:0;padding:0;width:100%;}.CHB .header .OP ul > li{display:table-cell;vertical-align:middle;}.CHB .header .OP ul > li:nth-child(1){width:36px;padding:0 8px 0 0;}.CHB .header .OP i{display:block;border-radius:50px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAeCAYAAADQBxWhAAAByklEQVRIib3Uv2oUURQG8JMUJhbaRcQXkGSJSafoG4ivoKIW4hMo+hKCYrVhtApst802Wk2xd+75vrMwxaIwrWhQlIB/ChNyLWRBZc3cuTPuga+dH2fmmyMSOVVVrZC8p6qvAOwBOACwZ2Yvvfd3p9PpidhnRU1RFBskK5LhXwHwxjm33gk4mUzOkXx3HPhb3qrq2dYoySwSnG3cbwUOBoOTAL43QUl+y7JsNRlV1e2GYCAZiqK4kIya2aUUlOTFNpv2UlBV7SWjw+HwFMmjhujRaDQ6nYyKiJAsG6JlK9B7v5X4TTfbbLmZ2N6NZDSEsMT4azQ7Du9DCEvJqIiIme00Qc1spxUoIpLn+Rp/TQzKPM/XWqMiIiSfRf6fTzsBRURU9Vbkpjc7Q8uyPEPyc02BPnX2amfjvb9Rg17vFBQRcc5dOQ4dj8eXO0fN7FrNQbjaKZhl2SqAFzUlel5V1UoyEkJYVtWe9/4OgD7Jj5Ht/QCgD+C2qvZCCMu1mKpum9kuyf2Umzsn+2a2673fmgt67x8BOOwI+7vZh2b28A+Q5IP/gc3JfRERAXCe5I9FoAAOnHPrYmZPFrTlLI+F5OsFo1Mh+XXB6JefaS87jHephdEAAAAASUVORK5CYII=') center bottom no-repeat #eee;}.CHB .header .OP i a{display:block;width:36px;height:36px;border-radius:50px;background:center center no-repeat;background-size:cover;}.CHB .header .OP .name{max-height:40px;max-width:240px;overflow:hidden;font-size:14px;}.CHB .header b.open{display:block;position:absolute;top:0;right:0;bottom:0;left:0;cursor:pointer;}.CHB .header b.close{display:none;position:absolute;top:0;right:0;bottom:0;opacity:0.7;transition:opacity 0.2s ease-in-out;width:50px;margin:0;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAASElEQVQokZ2QQRIAIAgC/f+n6VJOTWEIV3cdJTATYpLHFlVKVpEpU8nfxS9AfgUkpcRkSbJF61SrnAqgM+Wki+mUcLDdyhc/ABT2LuCoeOw7AAAAAElFTkSuQmCC') center center no-repeat;cursor:pointer;}.CHB .header b.close:hover{opacity:1;}.CHB.mobile .header{border-radius:0;}.CHB.mobile:not(.active) .header{height:80px;background:none;}.CHB.mobile:not(.active) .header_wrapper > ul > li{height:80px;}.CHB.mobile:not(.active) .header b.open{position:absolute;top:10px;right:10px;bottom:auto;left:auto;width:60px;height:60px;border-radius:100px;box-shadow:0 0 10px 0 rgba(0,0,0,0.2);background-color:"+r+";background-image:"+n+";}.CHB.mobile:not(.active) .header b.open:after{content:'';display:block;position:absolute;top:0;right:0;bottom:0;left:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJCQAACQkBhuGCeQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGcSURBVEiJxdexahRRFIDh/1wSlSiCFgZNLK2MFoqdIKQ0dco8gFVeIY1okS6+g6jYiFgoIgYr0agkQSRVbNwQ60QWd3+L3UFZknDd3bn7twPzDYfh3JkgI3UCmAVuA1eBSeB89/IPYAf4ArwA3kTEXs59jwKn1QfqvvntqSvqVD/guHpf/fUfYG/76l11LBedUt8NAPa2ql7IGe33IaJV2x42evW0+rkGtGpDPXMQ/LhGtOphL3pTbReAVW8BRBf+CFzLevsG70NE3Ah1BlgvhFZdTsB8YRRgPtFZhaWbDXUHOFcYboTaBMYLw80E/C6MArQS8HME8G4CNkYAbyZgdQTw81AvAd/obrECtYDpFBFbdD5ZSvUsIhrVrr4CrAF5Xwv91wRmImIrAUTEOrBcMwpwrzvhv6lj6qsaj8MnajrwcdST6tsa0NfqiSNnoR5Xnw4JbKvLat5KVu8MAd1U5w4zhv0Wt4D3wArwKCLag8JfgSXgGHAduAicpXPANOj8wnwCXkZE/7v/n1Hvqovm/g0MmrqgLqmn6jL+AM3ANLo13OclAAAAAElFTkSuQmCC) center center no-repeat;}.CHB.mobile:not(.active) .header .default{float:right;position:relative;margin:10px 85px 10px 10px;display:table;border-radius:3px;box-shadow:0 0 8px rgba(0,0,0,0.1);}.CHB.mobile:not(.active) .header .default span{position:relative;z-index:1;padding:7px 8px 7px 8px;border-radius:3px;background:#fff;color:#000;}.CHB.mobile:not(.active) .header .default:after{content:'';display:block;position:absolute;z-index:0;top:50%;right:-6px;margin-top:-6px;width:12px;height:12px;background:#fff;box-shadow:0 0 8px rgba(0,0,0,0.1);transform:rotate(45deg);}.CHB.active .header b.open{display:none;}.CHB.active .header b.close{display:block;}.CHB .body{vertical-align:top;position:relative;background-image:"+d+";background-color:"+s+";}.CHB .body .infoMessage{background:#fff;border-bottom:1px #eee solid;display:none;position:absolute;z-index:2;top:0;right:0;left:0;padding:15px;}.CHB .body .loading{}.CHB[status='connecting'] .body .infoMessage.loading{display:block;}.CHB .body .error{padding:15px;color:#ff0000;}.CHB[status='closed'] .body .infoMessage.error{display:block;}.CHB .body .CH{display:block;position:absolute;top:0;right:0;bottom:0;left:0;overflow-x:hidden;overflow-y:auto;}.CHB .CH_wraper{padding:15px;}.CHB .CH .message{position:relative;display:block;width:100%;margin:10px 0 0 0;}.CHB .CH .message:nth-child(1){margin-top:0;}.CHB .CH .message i{display:block;position:absolute;top:0;border-radius:50px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAeCAYAAADQBxWhAAAByklEQVRIib3Uv2oUURQG8JMUJhbaRcQXkGSJSafoG4ivoKIW4hMo+hKCYrVhtApst802Wk2xd+75vrMwxaIwrWhQlIB/ChNyLWRBZc3cuTPuga+dH2fmmyMSOVVVrZC8p6qvAOwBOACwZ2Yvvfd3p9PpidhnRU1RFBskK5LhXwHwxjm33gk4mUzOkXx3HPhb3qrq2dYoySwSnG3cbwUOBoOTAL43QUl+y7JsNRlV1e2GYCAZiqK4kIya2aUUlOTFNpv2UlBV7SWjw+HwFMmjhujRaDQ6nYyKiJAsG6JlK9B7v5X4TTfbbLmZ2N6NZDSEsMT4azQ7Du9DCEvJqIiIme00Qc1spxUoIpLn+Rp/TQzKPM/XWqMiIiSfRf6fTzsBRURU9Vbkpjc7Q8uyPEPyc02BPnX2amfjvb9Rg17vFBQRcc5dOQ4dj8eXO0fN7FrNQbjaKZhl2SqAFzUlel5V1UoyEkJYVtWe9/4OgD7Jj5Ht/QCgD+C2qvZCCMu1mKpum9kuyf2Umzsn+2a2673fmgt67x8BOOwI+7vZh2b28A+Q5IP/gc3JfRERAXCe5I9FoAAOnHPrYmZPFrTlLI+F5OsFo1Mh+XXB6JefaS87jHephdEAAAAASUVORK5CYII=') center bottom no-repeat #eee;}.CHB .CH .message i a{display:block;width:40px;height:40px;border-radius:50px;background:center center no-repeat;background-size:cover;}.CHB .CH .message_wrapper{float:left;display:block;padding:10px;margin:0 25px 0 50px;border-radius:10px;border-bottom-left-radius:0;background:#eee;font-size:15px;line-height:20px;white-space:pre-wrap;word-wrap:break-word;}.CHB .CH .message.client{}.CHB .CH .message:after{content:'';display:block;clear:both;}.CHB .CH .message.client .message_wrapper{float:right;margin:0 0 0 75px;border-radius:10px;border-bottom-right-radius:0;background:#b1f5ed;}.CHB .CH .message img{display:block;max-width:100%;}.CHB .CH .message .btn{display:inline-block;padding:8px;margin:2px;outline:none;border:1px #ccc solid;border-radius:3px;background:#fafafa;text-decoration:none;font-size:15px;color:#000;cursor:pointer;}.CHB .CH .message .btn:active{background:#dbdbdb;}.CHB .footer{visibility:hidden;vertical-align:bottom;border-top:1px #d8dee3 solid;height:5px;background-color:"+s+";}.CHB[status='connected'] .footer{visibility:visible;}.CHB .footer form{display:block;position:relative;padding:0;margin:0;}.CHB .footer button{position:absolute;top:10px;right:12px;margin:0;width:32px;height:32px;border:none;outline:none;border-radius:50px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAtElEQVQokZ3SLW4CQRiA4eVHouAKOEQFIZyANAhOQLDtLdoDILgBpj1Cw4qGYHqJBkcC1OCqCOmDmmT52x362skzM5lvkiQyVNDDGzZYxKAOJtg6bXcLNPGKb7dLs6COJ3zhLweFnhN0keIQAUJ7NBKs70Chj3Dd6T/wMOASRlhGwl/Uzl+4jAE+C/B70Wz7Ofgx5nPMrsAfVGNw2+W8x4Uw5/SHe3A3c/o8GmY2eMEKrfO1IyZKBe8jzDUoAAAAAElFTkSuQmCC') 8px center no-repeat #18c139;cursor:pointer;}.CHB .footer button:hover{background-color:#0f942a;}.CHB .footer .textarea{padding:0 0 0 15px;}.CHB .footer textarea{display:block;padding:15px 0 0 0;margin:0;width:100%;height:50px;min-height:50px;max-height:140px;outline:none;border:none;font-family:Arial;resize:none;line-height:20px;font-size:15px;}.CHB .footer .resize{position:absolute;left:0;right:0;height:0;overflow:hidden;}.CHB .footer .resize div{padding:0 0;margin:0;width:100%;min-height:50px;max-height:140px;outline:none;border:none;font-family:Arial;resize:none;line-height:20px;font-size:15px;white-space:pre-wrap;word-wrap:break-word;}</style>",p="<div class='CHB'><table cellpadding='0' cellspacing='0' class='CHB_wrapper'><tr><td class='header'><div class='header_wrapper'><ul><li class='container'><div class='OP'><ul><li><i><a></a></i></li><li><div class='name'></div></li></ul></div><div class='default'><span>"+a+"</span></div></li></ul><b class='open'></b><b class='close'></b></div></td></tr><tr><td class='body'><div class='infoMessage loading'>Идет соединение...</div><div class='infoMessage error'>Потеряно соединение</div><div class='CH'><div class='CH_wraper'></div></div><td></tr><tr><td class='footer'><form><div class='textarea'><textarea placeholder='Введите сообщение и нажмите Enter'></textarea><div class='resize'><div></div></div></div><button type='submit'></button></form><td></tr></table></div>",c=i.create("iframe");c.attr({id:"CHB"}),c.css({display:"none",position:"fixed",border:"none","z-index":"100000"}),t.s?c.css({width:"320px",bottom:"10px",right:"10px",height:"80px"}):c.css({transition:"height 0.4s ease-in-out",width:"340px",height:"50px",right:"30px",bottom:"0","box-shadow":"0 5px 10px 0 rgba(0,0,0,0.2)"}),i("body").append(c);var f=setInterval(function(){c.find("body")[0]&&(!function(){c.find("head").append("<meta name='viewport' content='width=device-width'>");var e=c.find("body");e.html(h+p),l||c.css({display:"block"});var a=e.find(".CHB");t.s&&a.addClass("mobile");var r=e.find(".body .CH"),n=e.find(".body .CH_wraper"),s=e.find(".footer form"),d=e.find(".footer textarea"),f=e.find(".footer .resize div");d[0].addEventListener("keydown",b,!1),d[0].addEventListener("keyup",b,!1),d[0].addEventListener("keypress",b,!1);var u={name:"",logo:""};function b(){var e=d.val();f.html(e+"\nb"),d.css({height:f.css("height")+"px"})}function m(){var e=d.val().replace(/^\s*|\s*$/gi,"");return e.length&&function(e){var t="<div class='message client'><div class='message_wrapper'>"+e+"</div></div>";n.append(t),r.css({"scroll-top":n.css("height")+600}),d.val(""),b(),d[0].focus(),d[0].focus();var i={m:e};g.send(JSON.stringify(i))}(e),!1}e[0].addEventListener("keydown",function(e){if(13==e.keyCode&&0==e.shiftKey)return m(),e.preventDefault(),!1},!1),s[0].onsubmit=function(){return!1},s[0].addEventListener("submit",m,!1),e.find(".header b.open")[0].addEventListener("click",function(){function e(){a.addClass("active"),u.name&&(a.find(".OP .name").html(u.name),a.find(".OP a").css({"background-image":"url("+u.logo+")"}),a.find(".OP").show(),a.find(".default").hide())}g.status||A(),t.s?(c.css({width:"100%",height:"100%",top:"0",left:"0",bottom:"0",right:"0"}),e()):(c.css({height:"420px"}),setTimeout(function(){e()},200)),l&&i("#"+l)[0]&&c.css({display:"block"})},!1),l&&i("#"+l)[0]&&i("#"+l)[0].addEventListener("click",function(){function e(){a.addClass("active"),u.name&&(a.find(".OP .name").html(u.name),a.find(".OP a").css({"background-image":"url("+u.logo+")"}),a.find(".OP").show(),a.find(".default").hide())}g.status||A(),t.s?(c.css({width:"100%",height:"100%",top:"0",left:"0",bottom:"0",right:"0"}),e()):(c.css({height:"420px"}),setTimeout(function(){e()},200)),c.css({display:"block"})},!1);e.find(".header b.close")[0].addEventListener("click",function(){t.s?(c.css({height:"80px"}),c.css({width:"100%",height:"100%",top:"0",left:"0",bottom:"0",right:"0"}),c.css({width:"320px",height:"80px",top:"auto",left:"auto",bottom:"10px",right:"10px"}),a.removeClass("active"),a.find(".OP").hide(),a.find(".default").show()):(c.css({height:"50px"}),setTimeout(function(){a.removeClass("active"),a.find(".OP").hide(),a.find(".default").show()},300)),l&&i("#"+l)[0]&&c.css({display:"none"})},!1);var v=0;function A(e){a.attr({status:"connecting"}),(g=new WebSocket("wss://smartobotobots.ru:8000?token="+o)).onopen=function(){g.status=1,v=0,a.attr({status:"connected"})},g.onclose=function(e){g.status=0,a.attr({status:"closed"}),v||(v=(new Date).getTime()),v&&v+12e4>(new Date).getTime()&&setTimeout(function(){3==g.readyState&&A()},1e4)},g.onmessage=function(e){try{!function(e){var t="";if(e.name||e.logo)e.name&&(a.find(".OP .name").html(e.name),u.name=e.name),e.logo&&(a.find(".OP a").css({"background-image":"url("+e.logo+")"}),u.logo=e.logo),a.attr("class").match("active")&&(a.find(".OP").show(),a.find(".default").hide());else if(e.i)t="<div class='message'><i title='"+u.name+"'><a style='background-image:url("+u.logo+");'></a></i><div class='message_wrapper'><img src='"+e.i+"'></div></div>";else if(e.m)t="<div class='message'><i title='"+u.name+"'><a style='background-image:url("+u.logo+");'></a></i><div class='message_wrapper'>"+e.m+"</div></div>";else{if(e&&e.length)for(var o=0;o<e.length;o++){for(var s=0;s<e[o].length;s++)e[o][s].url?t+='<a class="btn" href=\''+e[o][s].url+"' target='_blank'>"+e[o][s].b+"</a>":t+='<button class="btn" data="'+e[o][s].data+'">'+e[o][s].b+"</button>";t+="<br>"}t="<div class='message'><i title='"+u.name+"'><a style='background-image:url("+u.logo+");'></a></i><div class='message_wrapper'>"+t+"</div></div>"}n.append(t),r.find(".message img").each(function(){this.h1||(this.addEventListener("load",function(){r.css({"scroll-top":n.css("height")+600})},!1),this.h1=1)}),r.find(".message button").each(function(){this.h1||(this.addEventListener("click",function(){var e=i(this).attr("data"),t={d:e};g.send(JSON.stringify(t))},!1),this.h1=1)}),r.css({"scroll-top":n.css("height")+600})}(JSON.parse(e.data))}catch(e){}},g.onerror=function(e){g.status=0}}}(),clearInterval(f))},100),g={status:0}})}();